*table.txt*  Text table manipulation for Vim and Neovim

==============================================================================
CONTENTS                                                      *table-contents*

    1. Introduction ......................... |table-introduction|
    2. Requirements ......................... |table-requirements|
    3. Commands ............................. |table-commands|
    4. Mappings ............................. |table-mappings|
    5. Text Objects ......................... |table-text-objects|
    6. Configuration ........................ |table-configuration|
    7. Styles ............................... |table-styles|
    8. User Events .......................... |table-events|
    9. Functions ............................ |table-functions|
    10. License ............................. |table-license|

==============================================================================
INTRODUCTION                                              *table-introduction*

table.vim provides text table manipulation in Vim and Neovim. It parses
pipe-delimited tables and provides automatic alignment, navigation, text
objects. For Neovim users, it also includes a floating window cell editor.

Supported table styles: Markdown, Org-mode, reStructuredText, Unicode
box-drawing characters, and custom styles.

Table alignment processes only the lines around the cursor, as determined by the
`chunk_size` option. This keeps operations fast, even for large tables. The
|:Table-Complete| command processes the entire table regardless of chunk size.

==============================================================================
REQUIREMENTS                                              *table-requirements*

- Neovim required for floating window cell editor

Table Detection ~

Tables must meet the following requirements to be detected and processed:
- Be at least two lines in height
- Separated by blank lines above and below (comment strings are acceptable)

==============================================================================
COMMANDS                                                      *table-commands*

                                                                       *:Table*
:Table [action] [args]
    Main command for table actions. Without arguments, lists available actions.

    Actions:

    :Table EditCell                                         *:Table-EditCell*
        Edit current cell in a floating window (Neovim only). Opens an
        auto-resizing floating window for editing cell content.

        Equivalent to <Plug>(table_cell_edit) mapping.

        Example: >
            :Table EditCell
<
    :Table Complete                                          *:Table-Complete*
        Complete table structure by adding borders and alignment rows.

        Note: This command processes the entire table regardless of chunk_size,
        which may be slow for large tables.

        Equivalent to <Plug>(table_complete) mapping.

        Example: >
            :Table Complete
<
    :Table Align                                               *:Table-Align*
        Align table lines near the cursor, as determined by chunk_size. Adjusts
        column widths and formats borders.

        Equivalent to <Plug>(table_align) mapping.

        Example: >
            :Table Align
<
    :Table ToDefault                                         *:Table-ToDefault*
        Convert table to default style.

        Equivalent to <Plug>(table_to_default) mapping.

        Example: >
            :Table ToDefault
<

                                                                 *:TableOption*
:TableOption [subcommand] [args]
    Main command for configuration. Without arguments, displays current
    configuration.

    Subcommands:

    :TableOption Option [key] [value]                   *:TableOption-Option*
        Get or set table options. Without arguments, lists all options.
        With only key, shows current value. With key and value, sets option.

        Options:
        - i_vertical: Vertical border character (default: '|')
        - i_horizontal: Horizontal border character (default: '-')
        - i_alignment: Alignment marker character (default: ':')
        - default_alignment: Default column alignment: 'l', 'c', or 'r'
          (default: 'l')
        - chunk_size: Lines to process around cursor [before, after]
          (default: [-10, 10])
        - multiline: Enable multiline cells (default: false)
          When true, cells can contain newline characters.
        - preserve_indentation: Keep leading whitespace in multiline cells
          (default: true)

        Examples: >
            :TableOption Option default_alignment c
            :TableOption Option multiline true
<
    :TableOption Style [name]                            *:TableOption-Style*
        Get or set the current style. Without arguments, lists available
        styles.

        Built-in styles: default, markdown, org, rest, single, double

        Example: >
            :TableOption Style markdown
<
    :TableOption StyleOption [key] [value]         *:TableOption-StyleOption*
        Get or set style options. Without arguments, lists all style options.

        Style options:
        - omit_left_border: Hide left border (default: false)
        - omit_right_border: Hide right border (default: false)
        - omit_top_border: Hide top separator (default: false)
        - omit_bottom_border: Hide bottom separator (default: false)
        - omit_separator_rows: Hide separator rows between data rows
          (default: false)

        Example: >
            :TableOption StyleOption omit_left_border true
<
    :TableOption RegisterStyle [name]             *:TableOption-RegisterStyle*
        Save the current style configuration under a custom name. This will
        persist only for the current session; to use it regularly, add it to
        your vim/nvim configuration.

        Example: >
            :TableOption Style markdown
            :TableOption StyleOption omit_left_border true
            :TableOption RegisterStyle minimal_markdown
<

==============================================================================
MAPPINGS                                                      *table-mappings*

<plug> mappings are provided for table operations, navigation, and text objects.

Default mappings are provided for auto-alignment, navigation, and text objects.
These may be disabled by setting |g:table_disable_mappings|, or by calling the
config setup function with the disable_mappings option before the VimEnter event.

For table actions (EditCell, Align, Complete, ToDefault), <Plug>
mappings are provided but not mapped by default.

Suggested Keybindings ~

Suggested keybindings for table actions: >
    " Table actions
    nnoremap <leader>ta    <Plug>(table_align)
    nnoremap <leader><bar> <Plug>(table_complete)
    nnoremap <leader>td    <Plug>(table_to_default)

    " Cell editing (Neovim only)
    if has('nvim')
        nnoremap <leader>te <Plug>(table_cell_edit)
    endif
<

Table Operations ~
                                                        *<Plug>(table_align)*
<Plug>(table_align)
    Align table at the current line. Adjusts column widths and formats borders.
    Default: | in insert mode (auto-aligns on typing)
    No default normal mode mapping

                                                     *<Plug>(table_complete)*
<Plug>(table_complete)
    Complete table structure by adding borders and alignment rows.
    No default mapping

                                                   *<Plug>(table_to_default)*
<Plug>(table_to_default)
    Convert current table to default style.
    No default mapping

                                                   *<Plug>(table_cell_edit)*
<Plug>(table_cell_edit)
    Edit current cell in floating window (Neovim only). Useful for multiline
    editing. Changes save on WinLeave.
    No default mapping

Navigation ~
                                                        *<Plug>(table_next)*
<Plug>(table_next)
    Move to next cell, wrapping to next row at row end.
    Default: <Tab> (normal, visual, insert)

                                                        *<Plug>(table_prev)*
<Plug>(table_prev)
    Move to previous cell, wrapping to previous row at row start.
    Default: <S-Tab> (normal, visual, insert)

                                                   *<Plug>(table_move_left)*
<Plug>(table_move_left)
    Move to cell on the left.
    Default: <C-h> (normal, visual, insert)

                                                  *<Plug>(table_move_right)*
<Plug>(table_move_right)
    Move to cell on the right.
    Default: <C-l> (normal, visual, insert)

                                                     *<Plug>(table_move_up)*
<Plug>(table_move_up)
    Move to cell above.
    Default: <C-k> (normal, visual, insert)

                                                   *<Plug>(table_move_down)*
<Plug>(table_move_down)
    Move to cell below.
    Default: <C-j> (normal, visual, insert)

Text Objects ~

                                                *<Plug>(table_cell_textobj)*
tx          Cell text object (half borders)
                                          *<Plug>(table_inner_cell_textobj)*
ix          Inner cell (content only)
                                         *<Plug>(table_around_cell_textobj)*
ax          Around cell (includes borders)

                                                 *<Plug>(table_row_textobj)*
tr          Row text object (half borders)
                                           *<Plug>(table_inner_row_textobj)*
ir          Inner row (content only)
                                          *<Plug>(table_around_row_textobj)*
ar          Around row (includes separators)

                                              *<Plug>(table_column_textobj)*
tc          Column text object (half borders)
                                        *<Plug>(table_inner_column_textobj)*
ic          Inner column (content only)
                                       *<Plug>(table_around_column_textobj)*
ac          Around column (includes separators)

Text objects work in visual and operator-pending modes.

Examples: >
    dix     Delete cell content
    yir     Yank row
    dac     Delete column
    2dtc    Delete two columns
<

==============================================================================
TEXT OBJECTS                                              *table-text-objects*

Text objects for cells, rows, and columns. Defined for visual and operator
pending modes. "around" and "inner" variants select full borders or no borders,
while default selects half borders.

Cell Text Objects ~

tx          Cell, including bottom-right borders.
ax          Around cell, including adjacent borders.
ix          Inner cell content, excluding borders.

Row Text Objects ~

tr          Row, including bottom separator.
ar          Around row, including adjacent separators.
ir          Inner row content, excluding separator lines.

Column Text Objects ~

tc          Column, including right separator.
ac          Around column, including adjacent separators.
ic          Inner column content, excluding separators.

Counts ~

Text objects accept counts to select multiple adjacent items: >
    d2tx    Delete current cell and next cell
    v3ir    Select three rows
    y2ic    Yank two columns
<

==============================================================================
CONFIGURATION                                            *table-configuration*

Configuration is buffer-local. Each buffer has independent settings that can
be set via setup functions or modified at runtime.

Three Configuration Levels ~

1. Plugin defaults - Built-in defaults, never modified
2. User defaults - Set via |table#Setup()|, applied to new buffers
3. Buffer-local - Set via |table#SetBufferConfig()| or |:TableOption|

Configuration Functions ~
                                                               *table#Setup()*
table#Setup({config})
    Sets user defaults applied to all new buffers. Disable options only
    applicable before VimEnter event.

    Note: These settings are overridden by buffer-local settings.

    Parameters: >
        {
            'disable_mappings': v:false,
            'disable_ftplugins': v:false,
            'style': 'default',
            'options': {
                'multiline': v:false,
                'preserve_indentation': v:true,
                'default_alignment': 'left',
                'chunk_size': [-10, 10],
                'i_vertical': '|',
                'i_horizontal': '-',
                'i_alignment': ':'
            },
            'style_options': {
                'omit_left_border': v:false,
                'omit_right_border': v:false,
                'omit_top_border': v:false,
                'omit_bottom_border': v:false,
                'omit_separator_rows': v:false
            }
        }
<
    Example: >
        call table#Setup({
            \ 'style': 'markdown',
            \ 'options': {'default_alignment': 'center'}
            \ })
<
                                                      *table#SetBufferConfig()*
table#SetBufferConfig({config})
    Configure current buffer only. Use in ftplugin files or at runtime.
    Accepts same parameters as Setup().

    Example: >
        " In ftplugin/markdown.vim
        if exists('g:table_disable_ftplugins') && g:table_disable_ftplugins
            finish
        endif
        call table#SetBufferConfig({'style': 'markdown'})
<
                                                     *table#RestoreDefault()*
table#RestoreDefault()
    Reset current buffer to plugin defaults (ignores user defaults).

Configuration Options ~

disable_mappings        Boolean. Disable default keymaps. Must be set before
                        VimEnter or via Setup(). Use |g:table_disable_mappings|
                        variable as alternative. Default: v:false

disable_ftplugins       Boolean. Disable ftplugin configuration files. Use when
                        you want uniform config across filetypes. Use
                        |g:table_disable_ftplugins| variable as alternative.
                        Default: v:false

style                   String. Style name to use. See |table-styles|.
                        Default: 'default'

options                 Dictionary of table processing options:

    multiline               Boolean. Allow cells with newlines.
                            Default: v:false

    preserve_indentation    Boolean. Keep leading whitespace.
                            Default: v:true

    default_alignment       String. Column alignment: 'left', 'center', 'right'
                            (or 'l', 'c', 'r'). Default: 'left'

    chunk_size              List [before, after]. Lines around cursor to
                            process. Use [0, -1] for entire table.
                            Default: [-10, 10]

    i_vertical              String. Vertical border character. Default: '|'

    i_horizontal            String. Horizontal border character. Default: '-'

    i_alignment             String. Alignment marker character. Default: ':'

style_options           Dictionary of border visibility options:

    omit_left_border        Boolean. Hide left border. Default: v:false
    omit_right_border       Boolean. Hide right border. Default: v:false
    omit_top_border         Boolean. Hide top border. Default: v:false
    omit_bottom_border      Boolean. Hide bottom border. Default: v:false
    omit_separator_rows     Boolean. Hide separator rows. Default: v:false

Per-Filetype Configuration ~

The plugin provides default ftplugin files for common formats:
- ftplugin/markdown.vim - Markdown tables
- ftplugin/org.vim - Org-mode tables
- ftplugin/rst.vim - reStructuredText tables

Use the 'disable_ftplugins' option to disable.

To override or add custom ftplugin configurations, create your own
ftplugin files: >
    " ~/.vim/after/ftplugin/markdown.vim
    if exists('g:table_disable_ftplugins') && g:table_disable_ftplugins
        finish
    endif
    call table#SetBufferConfig({
        \ 'options': {'default_alignment': 'center'}
        \ })
<
Neovim Lua Configuration ~

In init.lua: >
    vim.fn['table#Setup']({
      style = 'markdown',
      options = {
        default_alignment = 'center'
      }
    })
<
In after/ftplugin/markdown.lua: >
    if vim.g.table_disable_ftplugins then return end
    vim.fn['table#SetBufferConfig']({
      style = 'markdown'
    })
<
Runtime Configuration ~

Use |:TableOption| to view or modify current buffer at runtime: >
    :TableOption                              " Show current config
    :TableOption Option default_alignment center   " Set option
    :TableOption Style markdown               " Set style
    :TableOption StyleOption omit_left_border v:true
<
Changes via :TableOption affect current buffer only and don't persist.

Global Variables ~
                                                     *g:table_disable_mappings*
g:table_disable_mappings
    Set to v:true to disable default mappings. Must be set before VimEnter.
    Default: v:false

                                                    *g:table_disable_ftplugins*
g:table_disable_ftplugins
    Set to v:true to disable ftplugin configuration files.
    Default: v:false


==============================================================================
STYLES                                                          *table-styles*

Styles control table border characters and visibility. Several built-in
styles are provided.

Built-in Styles ~

default - ASCII table with all borders: >

    |---------|---------|
    | Header1 | Header2 |
    |---------|---------|
    | Cell1   | Cell2   |
    |---------|---------|
<
markdown - Markdown tables (no top/bottom borders): >

    | Header1 | Header2 |
    |---------|---------|
    | Cell1   | Cell2   |
<
org - Org-mode tables (+ at intersections): >

    | Header1 | Header2 |
    |---------+---------|
    | Cell1   | Cell2   |
<
rest - reStructuredText tables (= for header separator): >

    +---------+---------+
    | Header1 | Header2 |
    +=========+=========+
    | Cell1   | Cell2   |
    +---------+---------+
<
single - Unicode single-line box-drawing: >

    ┌─────────┬─────────┐
    │ Header1 │ Header2 │
    ├─────────┼─────────┤
    │ Cell1   │ Cell2   │
    └─────────┴─────────┘
<
double - Unicode double-line box-drawing: >

    ╔═════════╦═════════╗
    ║ Header1 ║ Header2 ║
    ╠═════════╬═════════╣
    ║ Cell1   ║ Cell2   ║
    ╚═════════╩═════════╝
<
Custom Styles ~

Create custom styles by modifying style options and registering: >
    :TableOption Style markdown
    :TableOption StyleOption omit_left_border true
    :TableOption StyleOption omit_right_border true
    :TableOption RegisterStyle minimal
<
Style options:
- omit_left_border: Hide left border
- omit_right_border: Hide right border
- omit_top_border: Hide top separator
- omit_bottom_border: Hide bottom separator
- omit_separator_rows: Hide separators between data rows

==============================================================================
USER EVENTS                                                    *table-events*

User autocommands fired during cell editing (Neovim only).

Event Data ~

Both events provide data via `args.data` in Lua autocommands:
- bufnr: Buffer number of cell edit window
- winid: Window ID of cell edit window
- table: Table object (internal details, advanced use cases)
- cell_id: Cell identifier {row_id, byte_offset, col_id}

Note: cell_id is 0-indexed to the chunked table, it may not
correspond to the full table.

                                                       *User-TableCellEditPre*
TableCellEditPre

    Fired after cell edit window is created and content loaded, before
    entering the window.

    Use cases:
    - Set buffer-local options or mappings
    - Initialize UI or tracking

    Example: >
    vim.api.nvim_create_autocmd('User', {
        pattern = 'TableCellEditPre',
        callback = function(args)
            vim.bo[args.data.bufnr].filetype = 'markdown'
            vim.keymap.set('n', 'q', '<cmd>close<cr>',
                          { buffer = args.data.bufnr })
        end
    })
<
                                                      *User-TableCellEditPost*
TableCellEditPost

    Fired after window is closed but before saving buffer content to the
    table. Buffer can still be modified. Changes made here will be saved.

    Use cases:
    - Apply formatters to cell content
    - Validate cell content and show warnings/errors
    - Transform or normalize data

<
Note: Event data only accessible via Lua. Vimscript autocommands can trigger
but cannot access data.


==============================================================================
FUNCTIONS                                                    *table-functions*

                                                            *table#IsTable()*
table#IsTable({linenr})
    Return v:true if the line at {linenr} is part of a table, v:false
    otherwise.

                                                             *table#Align()*
table#Align({linenr})
    Align the table at the given line number, adjusting column widths and
    formatting separators.

                                                          *table#Complete()*
table#Complete({linenr})
    Complete the table structure at the given line number, adding missing
    borders and separators.

                                                         *table#ToDefault()*
table#ToDefault({linenr})
    Convert the table at the given line to the default style.

                                                       *table#CycleCursor()*
table#CycleCursor({dir}, {count1})
    Move the cursor to the next/previous cell. {dir} is 'forward' or
    'backward'. {count1} specifies how many times to move.

                                                    *table#MoveCursorCell()*
table#MoveCursorCell({dir}, {count1})
    Move the cursor in a specific direction: 'left', 'right', 'up', or
    'down'. {count1} specifies how many cells to move.

==============================================================================
LICENSE                                                        *table-license*

This plugin is distributed under the Mozilla Public License Version 2.0.
See LICENSE file for full details.

==============================================================================
vim:tw=78:ts=8:ft=help:norl:
